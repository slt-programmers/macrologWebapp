<div>
  <div class="weightgraph-wrapper">
    <div class="weightgraph">
      <ml-linegraph [dataset]="dataset" [xAxisStep]="1" [yAxisStep]="0.5"
        [hasOffgridValue]="hasOffgridValue"></ml-linegraph>
    </div>
  </div>

  <form #weightForm="ngForm">
    <div class="form-field">
      <label for="measurementDate" class="form-field__label">Measurement date</label>
      <input required class="input" validDate placeholder="DD-MM-YYYY" name="measurementDate"
        [(ngModel)]="measurementDate" />
    </div>

    <div class="form-field">
      <label for="weight" class="form-field__label">Weight (kg)</label>
      <input required class="input" name="weight" type="number" [(ngModel)]="weight" step="0.1" />
    </div>

    <div class="form-field">
      <label for="remark" class="form-field__label">Remark</label>
      <input class="input" name="remark" type="text" [(ngModel)]="remark" />
    </div>

    <div class=" button-wrapper">
      <button class="button button--primary" (click)="saveNewWeight(weightForm)"
        [disabled]="weightForm.invalid">
        Save
      </button>
    </div>
  </form>

  <div class="table-wrapper">
    <div class="table">
      <div class="weight-table-header">
        <div class="weight-table-header__day">Date</div>
        <div class="weight-table-header__remark">Remark</div>
        <div class="weight-table-header__weight">Weight</div>
      </div>
    </div>

    <div class="table-row" *ngFor="let logWeight of trackedWeights" (click)="editWeight(logWeight)">
      <div class="weight" *ngIf="!logWeight.editable">
        <div class="weight__day">{{ logWeight.day | date: 'dd-MM-yyyy' }}</div>
        <div class="weight__remark">{{ logWeight.remark }}</div>
        <div class="weight__weight">
          {{ logWeight.weight | number: '1.1-1' }}
        </div>
        <div class="weight__hiddenbuttons"></div>
      </div>

      <div class="p-1" *ngIf="logWeight.editable">
        <div class="flex flex-grow col-gap-1 items-center">
          <div class="">
            <label for="date">Date</label>
            <input name="date" required class="input" validDate placeholder="DD-MM-YYYY"
              [(ngModel)]="logWeight.day" />
          </div>

          <div class="">
            <label for="weight">Weight</label>
            <input class="input" name="weight" type="number" [(ngModel)]="logWeight.weight"
              step="0.1" />
          </div>

          <div class="flex flex-grow">
            <label for="comment">Comment</label>
            <input required class="input" name="comment" type="text"
              [(ngModel)]="logWeight.remark" [required]="false" />
          </div>

          <div class="flex">
            <button class="icon-button" (click)="saveWeight(logWeight)">
              <em class="fas fa-check"></em>
            </button>
          </div>

          <div class="flex">
            <button class="icon-button" (click)="deleteWeight(logWeight)">
              <em class="fas fa-trash"></em>
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>