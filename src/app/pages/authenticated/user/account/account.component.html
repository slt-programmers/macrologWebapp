<div class="flex flex-col gap-4">
	<form #updateForm="ngForm" class="flex flex-col gap-4">
		<h1 class="font-bold">Change password</h1>

		<div class="grid grid-cols-auto-1 items-center gap-2">
			<label for="oldPassword">Old password</label>
			<input
				type="password"
				[(ngModel)]="oldPassword"
				id="oldPassword"
				required
			/>

			<label for="newPassword">New password</label>
			<input
				type="password"
				[(ngModel)]="newPassword"
				id="newPassword"
				required
			/>

			<label for="confirmPassword">Confirm new password</label>
			<input
				type="password"
				[(ngModel)]="confirmPassword"
				id="confirmPassword"
				required
			/>
		</div>

		@if (message()) {
		<span class="text-error text-sm">{{ message() }}</span>
		}

		<button
			type="button"
			class="align-self-start btn btn--primary"
			[disabled]="updateForm.invalid"
			(click)="changePassword()"
		>
			Change password
		</button>
	</form>

	<h1 class="font-bold">Delete account</h1>

	<button
		type="button"
		class="btn btn--warning align-self-start"
		(click)="openModal()"
	>
		Delete
	</button>
</div>

@if (modalOpen) {
<ml-modal [title]="'Delete account'" (close$)="closeModal()">
	<div class="flex flex-col gap-4">
		<p>Enter your password to delete your account.</p>

		<p>This action is irreversable.</p>

		<div class="flex items-center gap-2">
			<label for="password">Password</label>
			<input
				type="password"
				#usernameField
				[(ngModel)]="password"
				name="password"
				required
			/>
		</div>
		@if (deleteError()) {
		<span class="text-error text-sm">Password incorrect</span>
		}
		<button
			[disabled]="!password"
			class="btn btn--warning align-self-end"
			(click)="deleteAccount()"
		>
			Yes
		</button>
	</div>
</ml-modal>
}
