<div class="bargraph">
  <div class="background">
    <div class="axes">
      <div class="y-axis-wrapper">
        <div #yAxis class="y-axis">
          @for (yPoint of yAxisPoints; track yPoint) {
            <div class="y-axis-point">
              {{yPoint}}
            </div>
          }
        </div>

        <div class="graph-content">
          @for (marker of markers(); track marker; let index = $index) {
            <div class="graph-marker" [style.height.px]="markerHeights[index]"
              [style.border-top-color]="colors()[index]">
            </div>
          }

          @if (graphPoints !== undefined && graphPoints[0] !== undefined) {
            @for (graphPoint of graphPoints[0]; track graphPoint; let pointIndex = $index) {
              <div class="graph-points-lane"
                >
                @for (set of graphPoints; track set; let setIndex = $index) {
                  <div class="graph-point"
                    [style.border-color]="colors()[setIndex]"
                    [style.background-color]="fillColors()[setIndex]"
                    [style.height.px]="graphPoints[setIndex][pointIndex].height"
                    [ngClass]="{'graph-point--empty': !graphPoints[setIndex][pointIndex].height}">
                  </div>
                }
              </div>
            }
          }
        </div>

        <div class="graph-marker-numbers">
          @for (marker of markers(); track marker; let index = $index) {
            <div class="graph-marker graph-marker--narrow" [style.height.px]="markerHeights[index]"
              [style.border-top-color]="colors()[index]">
              <div class="graph-marker__text">{{marker}}</div>
            </div>
          }
        </div>
      </div>

      <div class="x-axis-wrapper">
        <div class="x-axis-dummy-point"></div>

        <div #xAxis class="x-axis">
          @for (xPoint of xAxisPoints; track xPoint) {
            <div class="x-axis-point">
              <div class="x-axis-point-text">
                {{xPoint}}
              </div>
            </div>
          }
        </div>

        <div class="x-axis-dummy-point"></div>
      </div>
    </div>
  </div>
</div>